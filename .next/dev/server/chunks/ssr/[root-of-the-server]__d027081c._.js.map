{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///Users/leilalu/Documents/leila.no/components/comment/form.tsx"],"sourcesContent":["import { useAuth0 } from \"@auth0/auth0-react\";\n\ntype CommentFormProps = {\n  text: string;\n  setText: Function;\n  onSubmit: (e: React.FormEvent) => Promise<void>;\n};\n\nexport default function CommentForm({\n  text,\n  setText,\n  onSubmit,\n}: CommentFormProps) {\n  const { isAuthenticated, logout, loginWithPopup } = useAuth0();\n\n  return (\n    <form onSubmit={onSubmit}>\n      <textarea\n        className=\"flex w-full max-h-40 p-3 rounded resize-y bg-gray-200 text-gray-900 placeholder-gray-500\"\n        rows={2}\n        placeholder={\n          isAuthenticated\n            ? `What are your thoughts?`\n            : \"Please login to leave a comment\"\n        }\n        onChange={(e) => setText(e.target.value)}\n        value={text}\n        disabled={!isAuthenticated}\n      />\n\n      <div className=\"flex items-center mt-4\">\n        {isAuthenticated ? (\n          <div className=\"flex items-center space-x-6\">\n            <button className=\"py-2 px-4 rounded bg-blue-600 text-white disabled:opacity-40 hover:bg-blue-700\">\n              Send\n            </button>\n            <button\n              className=\"text-gray-500\"\n              onClick={() => logout({ returnTo: window.location.origin })}\n            >\n              Log Out\n            </button>\n          </div>\n        ) : (\n          <button\n            type=\"button\"\n            className=\"py-2 px-4 rounded bg-blue-600 text-white disabled:opacity-40 hover:bg-blue-700\"\n            onClick={() => loginWithPopup()}\n          >\n            Log In\n          </button>\n        )}\n      </div>\n    </form>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;;;AAQe,SAAS,YAAY,EAClC,IAAI,EACJ,OAAO,EACP,QAAQ,EACS;IACjB,MAAM,EAAE,eAAe,EAAE,MAAM,EAAE,cAAc,EAAE,GAAG,IAAA,uJAAQ;IAE5D,qBACE,qKAAC;QAAK,UAAU;;0BACd,qKAAC;gBACC,WAAU;gBACV,MAAM;gBACN,aACE,kBACI,CAAC,uBAAuB,CAAC,GACzB;gBAEN,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;gBACvC,OAAO;gBACP,UAAU,CAAC;;;;;;0BAGb,qKAAC;gBAAI,WAAU;0BACZ,gCACC,qKAAC;oBAAI,WAAU;;sCACb,qKAAC;4BAAO,WAAU;sCAAiF;;;;;;sCAGnG,qKAAC;4BACC,WAAU;4BACV,SAAS,IAAM,OAAO;oCAAE,UAAU,OAAO,QAAQ,CAAC,MAAM;gCAAC;sCAC1D;;;;;;;;;;;yCAKH,qKAAC;oBACC,MAAK;oBACL,WAAU;oBACV,SAAS,IAAM;8BAChB;;;;;;;;;;;;;;;;;AAOX"}},
    {"offset": {"line": 114, "column": 0}, "map": {"version":3,"sources":["file:///Users/leilalu/Documents/leila.no/lib/dateRelative.ts"],"sourcesContent":["import formatDistanceToNowStrict from \"date-fns/formatDistanceToNowStrict\";\n\nexport default function distanceToNow(dateTime: number | Date) {\n  return formatDistanceToNowStrict(dateTime, {\n    addSuffix: true,\n  });\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEe,SAAS,cAAc,QAAuB;IAC3D,OAAO,IAAA,4KAAyB,EAAC,UAAU;QACzC,WAAW;IACb;AACF"}},
    {"offset": {"line": 129, "column": 0}, "map": {"version":3,"sources":["file:///Users/leilalu/Documents/leila.no/components/comment/list.tsx"],"sourcesContent":["import type { Comment } from \"../../interfaces\";\nimport distanceToNow from \"../../lib/dateRelative\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\n\ntype CommentListProps = {\n  comments?: Comment[];\n  onDelete: (comment: Comment) => Promise<void>;\n};\n\nexport default function CommentList({ comments, onDelete }: CommentListProps) {\n  const { user } = useAuth0();\n\n  return (\n    <div className=\"space-y-6 mt-10\">\n      {comments &&\n        comments.map((comment) => {\n          const isAuthor = user && user.sub === comment.user.sub;\n          const isAdmin =\n            user && user.email === process.env.NEXT_PUBLIC_AUTH0_ADMIN_EMAIL;\n\n          return (\n            <div key={comment.created_at} className=\"flex space-x-4\">\n              <div className=\"flex-shrink-0\">\n                <img\n                  src={comment.user.picture}\n                  alt={comment.user.name}\n                  width={40}\n                  height={40}\n                  className=\"rounded-full\"\n                />\n              </div>\n\n              <div className=\"flex-grow\">\n                <div className=\"flex space-x-2\">\n                  <b>{comment.user.name}</b>\n                  <time className=\"text-gray-400\">\n                    {distanceToNow(comment.created_at)}\n                  </time>\n                  {(isAdmin || isAuthor) && (\n                    <button\n                      className=\"text-gray-400 hover:text-red-500\"\n                      onClick={() => onDelete(comment)}\n                      aria-label=\"Close\"\n                    >\n                      x\n                    </button>\n                  )}\n                </div>\n\n                <div>{comment.text}</div>\n              </div>\n            </div>\n          );\n        })}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;;;;AAOe,SAAS,YAAY,EAAE,QAAQ,EAAE,QAAQ,EAAoB;IAC1E,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,uJAAQ;IAEzB,qBACE,qKAAC;QAAI,WAAU;kBACZ,YACC,SAAS,GAAG,CAAC,CAAC;YACZ,MAAM,WAAW,QAAQ,KAAK,GAAG,KAAK,QAAQ,IAAI,CAAC,GAAG;YACtD,MAAM,UACJ,QAAQ,KAAK,KAAK;YAEpB,qBACE,qKAAC;gBAA6B,WAAU;;kCACtC,qKAAC;wBAAI,WAAU;kCACb,cAAA,qKAAC;4BACC,KAAK,QAAQ,IAAI,CAAC,OAAO;4BACzB,KAAK,QAAQ,IAAI,CAAC,IAAI;4BACtB,OAAO;4BACP,QAAQ;4BACR,WAAU;;;;;;;;;;;kCAId,qKAAC;wBAAI,WAAU;;0CACb,qKAAC;gCAAI,WAAU;;kDACb,qKAAC;kDAAG,QAAQ,IAAI,CAAC,IAAI;;;;;;kDACrB,qKAAC;wCAAK,WAAU;kDACb,IAAA,uHAAa,EAAC,QAAQ,UAAU;;;;;;oCAElC,CAAC,WAAW,QAAQ,mBACnB,qKAAC;wCACC,WAAU;wCACV,SAAS,IAAM,SAAS;wCACxB,cAAW;kDACZ;;;;;;;;;;;;0CAML,qKAAC;0CAAK,QAAQ,IAAI;;;;;;;;;;;;;eA5BZ,QAAQ,UAAU;;;;;QAgChC;;;;;;AAGR"}},
    {"offset": {"line": 246, "column": 0}, "map": {"version":3,"sources":["file:///Users/leilalu/Documents/leila.no/hooks/useComment.ts"],"sourcesContent":["import type { Comment } from \"../interfaces\";\nimport React, { useState } from \"react\";\nimport useSWR from \"swr\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\n\nconst fetcher = (url) =>\n  fetch(url).then((res) => {\n    if (res.ok) {\n      return res.json();\n    }\n\n    throw new Error(`${res.status} ${res.statusText} while fetching: ${url}`);\n  });\n\nexport default function useComments() {\n  const { getAccessTokenSilently } = useAuth0();\n  const [text, setText] = useState(\"\");\n\n  const { data: comments, mutate } = useSWR<Comment[]>(\n    \"/api/comment\",\n    fetcher,\n    { fallbackData: [] },\n  );\n\n  const onSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    const token = await getAccessTokenSilently();\n\n    try {\n      await fetch(\"/api/comment\", {\n        method: \"POST\",\n        body: JSON.stringify({ text }),\n        headers: {\n          Authorization: token,\n          \"Content-Type\": \"application/json\",\n        },\n      });\n      setText(\"\");\n      await mutate();\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const onDelete = async (comment: Comment) => {\n    const token = await getAccessTokenSilently();\n\n    try {\n      await fetch(\"/api/comment\", {\n        method: \"DELETE\",\n        body: JSON.stringify({ comment }),\n        headers: {\n          Authorization: token,\n          \"Content-Type\": \"application/json\",\n        },\n      });\n      await mutate();\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return { text, setText, comments, onSubmit, onDelete };\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;;;;;;;;AAEA,MAAM,UAAU,CAAC,MACf,MAAM,KAAK,IAAI,CAAC,CAAC;QACf,IAAI,IAAI,EAAE,EAAE;YACV,OAAO,IAAI,IAAI;QACjB;QAEA,MAAM,IAAI,MAAM,GAAG,IAAI,MAAM,CAAC,CAAC,EAAE,IAAI,UAAU,CAAC,iBAAiB,EAAE,KAAK;IAC1E;AAEa,SAAS;IACtB,MAAM,EAAE,sBAAsB,EAAE,GAAG,IAAA,uJAAQ;IAC3C,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,+GAAQ,EAAC;IAEjC,MAAM,EAAE,MAAM,QAAQ,EAAE,MAAM,EAAE,GAAG,IAAA,iHAAM,EACvC,gBACA,SACA;QAAE,cAAc,EAAE;IAAC;IAGrB,MAAM,WAAW,OAAO;QACtB,EAAE,cAAc;QAChB,MAAM,QAAQ,MAAM;QAEpB,IAAI;YACF,MAAM,MAAM,gBAAgB;gBAC1B,QAAQ;gBACR,MAAM,KAAK,SAAS,CAAC;oBAAE;gBAAK;gBAC5B,SAAS;oBACP,eAAe;oBACf,gBAAgB;gBAClB;YACF;YACA,QAAQ;YACR,MAAM;QACR,EAAE,OAAO,KAAK;YACZ,QAAQ,GAAG,CAAC;QACd;IACF;IAEA,MAAM,WAAW,OAAO;QACtB,MAAM,QAAQ,MAAM;QAEpB,IAAI;YACF,MAAM,MAAM,gBAAgB;gBAC1B,QAAQ;gBACR,MAAM,KAAK,SAAS,CAAC;oBAAE;gBAAQ;gBAC/B,SAAS;oBACP,eAAe;oBACf,gBAAgB;gBAClB;YACF;YACA,MAAM;QACR,EAAE,OAAO,KAAK;YACZ,QAAQ,GAAG,CAAC;QACd;IACF;IAEA,OAAO;QAAE;QAAM;QAAS;QAAU;QAAU;IAAS;AACvD"}},
    {"offset": {"line": 325, "column": 0}, "map": {"version":3,"sources":["file:///Users/leilalu/Documents/leila.no/components/comment/index.tsx"],"sourcesContent":["import CommentForm from \"./form\";\nimport CommentList from \"./list\";\nimport useComments from \"../../hooks/useComment\";\n\nexport default function Comment() {\n  const { text, setText, comments, onSubmit, onDelete } = useComments();\n\n  return (\n    <div className=\"mt-20\">\n      <CommentForm onSubmit={onSubmit} text={text} setText={setText} />\n      <CommentList comments={comments} onDelete={onDelete} />\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;;;;;AAEe,SAAS;IACtB,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ,EAAE,GAAG,IAAA,uHAAW;IAEnE,qBACE,qKAAC;QAAI,WAAU;;0BACb,qKAAC,kIAAW;gBAAC,UAAU;gBAAU,MAAM;gBAAM,SAAS;;;;;;0BACtD,qKAAC,kIAAW;gBAAC,UAAU;gBAAU,UAAU;;;;;;;;;;;;AAGjD"}},
    {"offset": {"line": 381, "column": 0}, "map": {"version":3,"sources":["file:///Users/leilalu/Documents/leila.no/lib/getPost.ts"],"sourcesContent":["import type { Post } from \"../interfaces\";\nimport fs from \"fs\";\nimport { join } from \"path\";\nimport matter from \"gray-matter\";\n\nconst postsDirectory = join(process.cwd(), \"_posts\");\n\nexport function getPostSlugs() {\n  return fs.readdirSync(postsDirectory);\n}\n\nexport function getPostBySlug(slug: string, fields: string[] = []) {\n  const realSlug = slug.replace(/\\.md$/, \"\");\n  const fullPath = join(postsDirectory, `${realSlug}.md`);\n  const fileContents = fs.readFileSync(fullPath, \"utf8\");\n  const { data, content } = matter(fileContents);\n\n  const items: Post = {};\n\n  // Ensure only the minimal needed data is exposed\n  fields.forEach((field) => {\n    if (field === \"slug\") {\n      items[field] = realSlug;\n    }\n    if (field === \"content\") {\n      items[field] = content;\n    }\n\n    if (typeof data[field] !== \"undefined\") {\n      items[field] = data[field];\n    }\n  });\n\n  return items;\n}\n\nexport function getAllPosts(fields: string[] = []) {\n  const slugs = getPostSlugs();\n  const posts = slugs\n    .map((slug) => getPostBySlug(slug, fields))\n    // sort posts by date in descending order\n    .sort((post1, post2) => (post1.date > post2.date ? -1 : 1));\n  return posts;\n}\n"],"names":[],"mappings":";;;;;;;;AACA;AACA;AACA;;;;AAEA,MAAM,iBAAiB,IAAA,yGAAI,EAAC,QAAQ,GAAG,IAAI;AAEpC,SAAS;IACd,OAAO,wGAAE,CAAC,WAAW,CAAC;AACxB;AAEO,SAAS,cAAc,IAAY,EAAE,SAAmB,EAAE;IAC/D,MAAM,WAAW,KAAK,OAAO,CAAC,SAAS;IACvC,MAAM,WAAW,IAAA,yGAAI,EAAC,gBAAgB,GAAG,SAAS,GAAG,CAAC;IACtD,MAAM,eAAe,wGAAE,CAAC,YAAY,CAAC,UAAU;IAC/C,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,IAAA,gIAAM,EAAC;IAEjC,MAAM,QAAc,CAAC;IAErB,iDAAiD;IACjD,OAAO,OAAO,CAAC,CAAC;QACd,IAAI,UAAU,QAAQ;YACpB,KAAK,CAAC,MAAM,GAAG;QACjB;QACA,IAAI,UAAU,WAAW;YACvB,KAAK,CAAC,MAAM,GAAG;QACjB;QAEA,IAAI,OAAO,IAAI,CAAC,MAAM,KAAK,aAAa;YACtC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM;QAC5B;IACF;IAEA,OAAO;AACT;AAEO,SAAS,YAAY,SAAmB,EAAE;IAC/C,MAAM,QAAQ;IACd,MAAM,QAAQ,MACX,GAAG,CAAC,CAAC,OAAS,cAAc,MAAM,QACnC,yCAAyC;KACxC,IAAI,CAAC,CAAC,OAAO,QAAW,MAAM,IAAI,GAAG,MAAM,IAAI,GAAG,CAAC,IAAI;IAC1D,OAAO;AACT"}},
    {"offset": {"line": 451, "column": 0}, "map": {"version":3,"sources":["file:///Users/leilalu/Documents/leila.no/lib/markdownToHtml.ts"],"sourcesContent":["import type { VFileCompatible } from \"vfile\";\nimport { remark } from \"remark\";\nimport html from \"remark-html\";\n\nexport default async function markdownToHtml(markdown: VFileCompatible) {\n  const result = await remark().use(html).process(markdown);\n  return result.toString();\n}\n"],"names":[],"mappings":";;;;AACA;AACA;;;;;;;;AAEe,eAAe,eAAe,QAAyB;IACpE,MAAM,SAAS,MAAM,IAAA,sHAAM,IAAG,GAAG,CAAC,uIAAI,EAAE,OAAO,CAAC;IAChD,OAAO,OAAO,QAAQ;AACxB"}},
    {"offset": {"line": 475, "column": 0}, "map": {"version":3,"sources":["file:///Users/leilalu/Documents/leila.no/pages/posts/%5Bslug%5D.tsx"],"sourcesContent":["import type { InferGetStaticPropsType } from \"next\";\nimport { useRouter } from \"next/router\";\nimport ErrorPage from \"next/error\";\nimport Comment from \"../../components/comment\";\nimport Container from \"../../components/container\";\nimport distanceToNow from \"../../lib/dateRelative\";\nimport { getAllPosts, getPostBySlug } from \"../../lib/getPost\";\nimport markdownToHtml from \"../../lib/markdownToHtml\";\nimport Head from \"next/head\";\n\nexport default function PostPage({\n  post,\n}: InferGetStaticPropsType<typeof getStaticProps>) {\n  const router = useRouter();\n\n  if (!router.isFallback && !post?.slug) {\n    return <ErrorPage statusCode={404} />;\n  }\n\n  return (\n    <Container>\n      <Head>\n        <title>{post.title} | My awesome blog</title>\n      </Head>\n\n      {router.isFallback ? (\n        <div>Loadingâ€¦</div>\n      ) : (\n        <div>\n          <article>\n            <header>\n              <h1 className=\"text-4xl font-bold\">{post.title}</h1>\n              {post.excerpt ? (\n                <p className=\"mt-2 text-xl\">{post.excerpt}</p>\n              ) : null}\n              <time className=\"flex mt-2 text-gray-400\">\n                {distanceToNow(new Date(post.date))}\n              </time>\n            </header>\n\n            <div\n              className=\"prose mt-10\"\n              dangerouslySetInnerHTML={{ __html: post.content }}\n            />\n          </article>\n\n          <Comment />\n        </div>\n      )}\n    </Container>\n  );\n}\n\ntype Params = {\n  params: {\n    slug: string;\n  };\n};\n\nexport async function getStaticProps({ params }: Params) {\n  const post = getPostBySlug(params.slug, [\n    \"slug\",\n    \"title\",\n    \"excerpt\",\n    \"date\",\n    \"content\",\n  ]);\n  const content = await markdownToHtml(post.content || \"\");\n\n  return {\n    props: {\n      post: {\n        ...post,\n        content,\n      },\n    },\n  };\n}\n\nexport async function getStaticPaths() {\n  const posts = getAllPosts([\"slug\"]);\n\n  return {\n    paths: posts.map(({ slug }) => {\n      return {\n        params: {\n          slug,\n        },\n      };\n    }),\n    fallback: false,\n  };\n}\n"],"names":[],"mappings":";;;;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AAEe,SAAS,SAAS,EAC/B,IAAI,EAC2C;IAC/C,MAAM,SAAS,IAAA,oIAAS;IAExB,IAAI,CAAC,OAAO,UAAU,IAAI,CAAC,MAAM,MAAM;QACrC,qBAAO,qKAAC,0IAAS;YAAC,YAAY;;;;;;IAChC;IAEA,qBACE,qKAAC,4HAAS;;0BACR,qKAAC,gIAAI;0BACH,cAAA,qKAAC;;wBAAO,KAAK,KAAK;wBAAC;;;;;;;;;;;;YAGpB,OAAO,UAAU,iBAChB,qKAAC;0BAAI;;;;;qCAEL,qKAAC;;kCACC,qKAAC;;0CACC,qKAAC;;kDACC,qKAAC;wCAAG,WAAU;kDAAsB,KAAK,KAAK;;;;;;oCAC7C,KAAK,OAAO,iBACX,qKAAC;wCAAE,WAAU;kDAAgB,KAAK,OAAO;;;;;+CACvC;kDACJ,qKAAC;wCAAK,WAAU;kDACb,IAAA,uHAAa,EAAC,IAAI,KAAK,KAAK,IAAI;;;;;;;;;;;;0CAIrC,qKAAC;gCACC,WAAU;gCACV,yBAAyB;oCAAE,QAAQ,KAAK,OAAO;gCAAC;;;;;;;;;;;;kCAIpD,qKAAC,mIAAO;;;;;;;;;;;;;;;;;AAKlB;AAQO,eAAe,eAAe,EAAE,MAAM,EAAU;IACrD,MAAM,OAAO,IAAA,wHAAa,EAAC,OAAO,IAAI,EAAE;QACtC;QACA;QACA;QACA;QACA;KACD;IACD,MAAM,UAAU,MAAM,IAAA,yHAAc,EAAC,KAAK,OAAO,IAAI;IAErD,OAAO;QACL,OAAO;YACL,MAAM;gBACJ,GAAG,IAAI;gBACP;YACF;QACF;IACF;AACF;AAEO,eAAe;IACpB,MAAM,QAAQ,IAAA,sHAAW,EAAC;QAAC;KAAO;IAElC,OAAO;QACL,OAAO,MAAM,GAAG,CAAC,CAAC,EAAE,IAAI,EAAE;YACxB,OAAO;gBACL,QAAQ;oBACN;gBACF;YACF;QACF;QACA,UAAU;IACZ;AACF"}}]
}